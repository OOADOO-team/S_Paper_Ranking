function main(e){"undefined"==typeof _main_scripts?_main_scripts=[e]:_main_scripts.push(e)}function GrapeGroup(){this._items=[],this.length=0,this._animations=[],this._img=null}function Grape(e,t){var n;if(this.isShape=!1,e=raceme.dV(e,"g"),null===e&&(e="g"),t=raceme.dV(t,"svg"),"string"==typeof e)("img"==e||"div"==e)&&(t="html"),"svg"==t?this.seed=document.createElementNS("http://www.w3.org/2000/svg",e):this.seed=document.createElement(e),n=this.tagName(),"svg"==n?(this.style("overflow","hidden"),this.attr("viewBox","0 0 500 500").attr("width","500").attr("height","500").attr("version","1.1").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink")):("circle"==n||"ellipse"==n||"rect"==n||"line"==n||"path"==n||"polygon"==n||"polyline"==n||"image"==n||"text"==n)&&(this.isShape=!0);else{if("undefined"!=typeof e._grape&&e._grape instanceof Grape)return e._grape;this.seed=e,n=e.tagName,("circle"==n||"ellipse"==n||"rect"==n||"line"==n||"path"==n||"polygon"==n||"polyline"==n||"image"==n||"text"==n)&&(this.isShape=!0)}this.seed._grape=this,this.is_beginFill=!1,this.current_fill_color="none",this.current_fill_alpha=1,this.is_beginPath=!1,this.current_path="",this.is_beginPath_closed=!1,this.current_stroke_thickness=0,this.current_stroke_color="none",this.current_stroke_caps="butt",this.current_stroke_joints="miter",this.current_stroke_miterLimit=4,this.current_stroke_alpha=1,this.current_stroke_dasharray="1",this.currentX=0,this.currentY=0,this._animations=[],this._events=[],this._prev_display=null}function GrapeEvent(e,t,n){this._function=t,this._type=e,n=raceme.dV(n,"none"),"string"!=typeof n&&(n=n.toString()),this._id=n}function GrapeAnimation(e,t,n){this._grape=e,this._duration=raceme.dV(t,2e3),this._easeFunction=raceme._getEaseFunction(),this._init_delay=raceme.dV(n,0),this._delayed=0,this._is_time_delayed=!1,this._dinterval=Math.min(16,this._duration),this._start_time=Date.now()||(new Date).getTime(),this._finish=this._start_time+this._duration+this._init_delay,this._interval=null,this._concurrentAnimations=[],this._freezeAnimations=[],this._freeze=!1,this._pause=!1,this._resume_pause_time=null}SVGElement.prototype.getTransformToElement=SVGElement.prototype.getTransformToElement||function(e){return e.getScreenCTM().inverse().multiply(this.getScreenCTM())},raceme=window.raceme={_idgen:0},by=raceme.by=function(e){if("string"!=typeof e)return new GrapeGroup;var t=e.split(":"),n=t[0];if(2==t.length&&"id"==raceme._clearString(n)){var r=t[1];return null!==document.getElementById(r)?new Grape(document.getElementById(r)):null}return new Grape(document.documentElement).by(e)},raceme.addChild=function(e){return new Grape(document.documentElement).addChild(e)},raceme.ajax=function(e){if("object"==typeof e){e.url=raceme.dV(e.url,"http://localhost/"),"POST"!=e.method&&"HEAD"!=e.method&&(e.method="GET"),e.data=raceme.dV(e.data,""),"XML"!=e.format&&"blob"!=e.format&&(e.format="text");var t;t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),"string"!=typeof e.data&&(e.data=e.data.toString()),"GET"==e.method&&""!=e.data&&(e.url+="?"+e.data),"XML"==e.format&&t.overrideMimeType?t.overrideMimeType("text/xml"):"XML"==e.format?e.format="text":"blob"==e.format&&(t.responseType="blob"),t.open(e.method,e.url,!0);var n=this;return t.onreadystatechange=function(){4==t.readyState&&("undefined"!=typeof e.always&&e.always.call(n),200==t.status||304==t.status?"undefined"!=typeof e.done&&("XML"==e.format&&null!=t.responseXML?(t.responseXML.xml&&e.done.call(n,t.responseXML.xml,"XML"),e.done.call(n,t.responseXML,"XML")):"blob"==e.format?e.done.call(n,t.response):e.done.call(n,t.responseText,"text")):"undefined"!=typeof e.fail&&e.fail.call(n,t.status))},"POST"!=e.method&&"HEAD"!=e.method||""==e.data?t.send():t.send(e.data),t}return null},raceme.label=function(e,t,n,r,i,a,s,o){e=raceme.dV(e,""),"string"!=typeof e&&e.toString&&(e=e.toString()),t=raceme.dV(t,0),n=raceme.dV(n,0),r=raceme.dV(r,"black"),i=raceme.dV(i,14);var u=.25*i;a=raceme.dV(a,"left"),s=raceme.dV(s,"top"),o=raceme.dV(o,1);var h,c,l,f;if(-1==e.indexOf("|")){var m=new Grape("text");for(m.attr("x",t).attr("y",n).attr("font-size",i),"black"!=r&&m.attr("fill",r),"center"==raceme._clearString(a)&&m.attr("text-anchor","middle"),"right"==raceme._clearString(a)&&m.attr("text-anchor","end"),1!=o&&m.attr("opacity",o),f=u,"bottom"==raceme._clearString(s)&&(f=i),"middle"==raceme._clearString(s)&&(f=.4*i),h=e.split("\n"),c=0;c<h.length;c++){var p=new Grape("tspan");p.attr("x",t),p.attr("dy",f),"\\b"==h[c].substring(0,2)?(h[c]=h[c].substring(2),p.attr("fill","rgb(150,150,150)")):""==h[c].trim()&&(h[c]="NB",p.opacity(0)),p.seed.appendChild(document.createTextNode(h[c])),m.addChild(p),f=i+u}return m}h=e.trim().split("\n");var d=[],g=1,_=(new Grape).x(t).y(n);for(c=0;c<h.length;c++)d[c]=h[c].split("|"),g=Math.max(g,d[c].length);var G=0;for(l=0;g>l;l++){for(var y="",c=0;c<h.length;c++)"undefined"!=typeof d[c][l]&&(y+=d[c][l]),c<h.length-1&&(y+="\n");var v=raceme.label(y,G,0,r,i,a,s,o);"center"==a?v.x(v.x()+v.getBBox().width/2):"right"==a&&v.x(v.x()+v.getBBox().width),_.addChild(v),G=_.getBBox().width+u}return _},raceme.image=function(e,t,n,r,i){e=raceme.dV(e,""),t=raceme.dV(t,0),n=raceme.dV(n,0),r=raceme.dV(r,""),i=raceme.dV(i,"");var a=new Grape("image").attr("href",e).attr("x",t).attr("y",n).attr("width",r).attr("height",i);return""===r&&a.load(function(e){this.width(e.target.width)}),""===i&&a.load(function(e){this.height(e.target.height)}),a},raceme.wheelValue=function(e){return e.wheelDelta?e.wheelDelta/120:e.detail?-e.detail:0},raceme.cursorPoint=function(e){var t=e.currentTarget||e.target;1!=t.nodeType&&(t=e.target);var n=t.ownerSVGElement.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n.matrixTransform(t.ownerSVGElement.getScreenCTM().inverse())},raceme.window={},raceme.window.width=function(){return document.documentElement.clientWidth},raceme.window.height=function(){return document.documentElement.clientHeight},GrapeGroup.fn=GrapeGroup.prototype,Grape.fn=Grape.prototype,GrapeGroup.fn.by=function(e){if(0==this.length||"string"!=typeof e)return new GrapeGroup;var e=e.split(":"),t=new GrapeGroup,n=e[0];if(n=raceme._clearString(n),1==e.length)this.each(function(){raceme._clearString(this.tagName())==n&&t.push(this)});else if(2==e.length){if("id"==n)return raceme.by("id:"+e[1]);var r=raceme._clearString(e[1]);this.each(function(){"class"==n?this.containsClass(r)&&t.push(this):raceme._clearString(this.attr(n))==r&&t.push(this)})}return t},Grape.fn.by=function(e){if("string"!=typeof e)return new GrapeGroup;var e=e.split(":"),t=new GrapeGroup,n=e[0];if(1==e.length)for(var r=this.seed.getElementsByTagName(n),i=0;i<r.length;i++)t.push(new Grape(r[i]));else if(2==e.length){var a=e[1];if("id"==raceme._clearString(n))return raceme.by("id:"+a);a=raceme._clearString(a);var r=this.getChildren();r.each(function(){"class"==raceme._clearString(n)?this.containsClass(a)&&t.push(this):raceme._clearString(this.attr(n))==a&&t.push(this),t.push(this.by(n+":"+a))})}return t},Grape.fn.clone=function(){return new Grape(this.seed.cloneNode(!0))},GrapeGroup.fn.show=function(){return this.each(Grape.fn.show)},Grape.fn.show=function(){return"none"==this.style("display")&&(null!==this._prev_display?this.style("display",this._prev_display):this.style("display","inline")),this},GrapeGroup.fn.hide=function(){return this.each(Grape.fn.hide)},Grape.fn.hide=function(){return"none"!=this.style("display")&&(this._prev_display=this.style("display"),this.style("display","none")),this},GrapeGroup.fn.attr=function(){if("undefined"==typeof arguments[0])return this;if("undefined"!=typeof arguments[1])return raceme._likeArray(arguments[1])===!1?this.each(Grape.fn.attr,arguments):this.eachValue(Grape.fn.attr,arguments[1],arguments[0]);var e=[];return this.each(function(){e.push(this.attr(arguments[0]))},arguments),e},Grape.fn.attr=function(e,t){if("undefined"!=typeof e&&1==this.seed.nodeType){if("undefined"==typeof t)return 0==this.hasAttr(e)?"undefined"!=typeof raceme._defaultAttributeValues[e]?raceme._defaultAttributeValues[e]:"":"href"!=e||"image"!=this.tagName()&&"filter"!=this.tagName()&&"textPath"!=this.tagName()?this.seed.getAttributeNS(null,e):this.seed.getAttributeNS("http://www.w3.org/1999/xlink",e);""===t||null===t?this.seed.removeAttribute(e):"href"!=e||"image"!=this.tagName()&&"filter"!=this.tagName()&&"textPath"!=this.tagName()?this.seed.setAttribute(e,t):this.seed.setAttributeNS("http://www.w3.org/1999/xlink",e,t)}return this},GrapeGroup.fn.opacity=function(){return this._applyFunction(Grape.fn.opacity,arguments)},Grape.fn.opacity=function(e){return"undefined"!=typeof e&&(e=Math.max(Math.min(e,1),0)),this.style("opacity",e)},GrapeGroup.fn.fill=function(){return this._applyFunction(Grape.fn.fill,arguments)},Grape.fn.fill=function(e){return"undefined"==typeof e?this.style("fill"):(this.seed.style.fill=e,this)},GrapeGroup.fn.width=function(){return this._applyFunction(Grape.fn.width,arguments)},Grape.fn.width=function(e){return this.attr("width",e)},GrapeGroup.fn.height=function(){return this._applyFunction(Grape.fn.height,arguments)},Grape.fn.height=function(e){return this.attr("height",e)},GrapeGroup.fn.zoomable=function(){return this._applyFunction(Grape.fn.zoomable,arguments)},Grape.fn.zoomable=function(e,t,n,r,i){this._zoomable=!0,this._zoom_w=raceme.dV(n,100),this._zoom_h=raceme.dV(r,100),this._zoom_x=raceme.dV(e,0),this._zoom_y=raceme.dV(t,0),this._zoom_max=raceme.dV(i,5),this._zoom_factor=.5,this._current_zooming=!1,this._sumelementszoom=0,this._nonscalables=this.by("class:nonscalable"),this._nonscalableborder=this.by("class:nonscalable_border"),this._force_redraw_elements=this.by("class:forceredrawelement"),this._force_redraw_elements_non_animated=this.by("class:forceredrawelementnonanimated"),this._sumelementszoom=this._nonscalables.length+this._nonscalableborder.length+3*this._force_redraw_elements.length+this._force_redraw_elements_non_animated.length,this.startPanning=null,this.endPanning=null,this.changePanning=null,this.startZoom=null,this.endZoom=null;var a=new Grape("rect").opacity(0).x(this._zoom_x).y(this._zoom_y).attr("width",this._zoom_w).attr("height",this._zoom_h);this.addChild(a),a.toBack();var s=this;return this.drag(function(e){s._startPanning(e)},function(e){s._changePanning(e),s._callwhenchange&&s._callwhenchange.call()},function(e){s._endPanning(e)}).mousewheel(function(e){return s._scrollMouse(e),e.preventDefault(),!1}),this.dblclic(function(e){s.scale()>.5*s._zoom_max?s.setZoom(1,!0,e):s.setZoom(.66*s._zoom_max,!0,e)}),this.dbltap(function(e){s.scale()>.5*s._zoom_max?s.setZoom(1,!0,e):s.setZoom(.66*s._zoom_max,!0,e)}),this.mousewheel(function(e){return s._scrollMouse(e),e.preventDefault(),!1}),this},GrapeGroup.fn.zoomIn=function(e){return this.each(Grape.fn.zoomIn)},Grape.fn.zoomIn=function(e){return this.setZoom(this.scale()+this._zoom_factor,!0,e),this},GrapeGroup.fn.zoomOut=function(e){return this.each(Grape.fn.zoomOut)},Grape.fn.zoomOut=function(e){return this.setZoom(this.scale()-this._zoom_factor,!0,e),this},GrapeGroup.fn.focusZoom=function(e){return this._applyFunction(Grape.fn.focusZoom,arguments)},Grape.fn.focusZoom=function(e){var t=e.x2-e.x,n=e.y2-e.y;e.x-=.05*t,e.x2+=.05*t,e.y-=.05*n,e.y2+=.05*n,t=e.x2-e.x,n=e.y2-e.y;var r=e.x+t/2,i=e.y+n/2,a=Math.min(this._zoom_w/t,this._zoom_h/n);this.setZoom(a,!0,r,i)},GrapeGroup.fn.setZoom=function(){return this._applyFunction(Grape.fn.setZoom,arguments)},Grape.fn.setZoom=function(e,t,n,r){t=raceme.dV(t,!0);var i=Math.max(1,Math.min(this._zoom_max,e)),a=this.scale();if(i!=a){this.startZoom&&this.startZoom.call(this),this._zoom_factor=.5+.5*(i-1);var s,o,u,h;if("undefined"!=typeof r)u=n,h=r;else if(n){n.touches&&n.touches[0]&&(n=n.touches[0]);var c=raceme.cursorPoint(n);u=c.x,h=c.y}else u=this._zoom_w/2,h=this._zoom_h/2;var l=raceme.map(u,this.x(),this.x()+this._zoom_w*a,0,this._zoom_w),f=raceme.map(h,this.y(),this.y()+this._zoom_h*a,0,this._zoom_h);"undefined"!=typeof r?(o=-(i*l)+this._zoom_w/2+this._zoom_x,s=-(i*f)+this._zoom_h/2+this._zoom_y):(o=-(i*l)+u,s=-(i*f)+h),o=Math.max(o,-(this._zoom_w*i)+this._zoom_w-(i-1)*this._zoom_x),o=Math.min(o,-(i-1)*this._zoom_x),s=Math.max(s,-(this._zoom_h*i)+this._zoom_h-(i-1)*this._zoom_y),s=Math.min(s,-(i-1)*this._zoom_y);var m=this;this._sumelementszoom<1e4&&t?(this._current_zooming=!0,this.animate(400).ease("out").move(o,s).scale(i).meanwhile(function(){m._force_redraw_elements.each(function(){this._force_redraw()}),m._callwhenchange&&m._callwhenchange.call()}).done(function(){null!==m.endZoom&&m.endZoom.call(this),this._current_zooming=!1,this._force_redraw_elements_non_animated.each(function(){this._force_redraw()}),this._nonscalableborder.each(function(){var e=this.style("stroke-width").replace("px","");this.style("stroke-width",e*a/i)})}),this._nonscalables.animate(400).ease("out").scale(1/i)):(this.move(o,s).scale(i),this._nonscalables.scale(1/i),this._force_redraw_elements.each(function(){this._force_redraw()}),this._force_redraw_elements_non_animated.each(function(){this._force_redraw()}),this._nonscalableborder.each(function(){var e=this.style("stroke-width").replace("px","");this.style("stroke-width",e*a/i)}),null!==this.endZoom&&this.endZoom.call(this),m._callwhenchange&&m._callwhenchange.call())}return this},GrapeGroup.fn.getChildren=function(){var e=new GrapeGroup;return this.each(function(){e.push(this.getChildren())}),e},Grape.fn.getChildren=function(){for(var e=new GrapeGroup,t=this.seed.firstChild;t;)1==t.nodeType&&e.push(new Grape(t)),t=t.nextSibling;return e},GrapeGroup.fn.first=GrapeGroup.fn.firstChild=function(){return this.firstItem().firstChild()},Grape.fn.first=Grape.fn.firstChild=function(){return this.getChildren().firstItem()},GrapeGroup.fn.last=GrapeGroup.fn.lastChild=function(){return this.lastItem().lastChild()},Grape.fn.last=Grape.fn.lastChild=function(){return this.getChildren().lastItem()},GrapeGroup.fn.getParents=function(){var e=new GrapeGroup;return this.each(function(){e.push(this.getParent())}),e},Grape.fn.getParent=function(){return this.seed.parentNode&&"svg"!=this.tagName()&&1==this.seed.nodeType?new Grape(this.seed.parentNode):null},GrapeGroup.fn.remove=function(){return this.each(Grape.fn.remove)},Grape.fn.remove=function(){return this.seed.parentNode&&this.seed.parentNode.removeChild(this.seed),this},GrapeGroup.fn.clear=function(){return this.each(Grape.fn.clear)},Grape.fn.clear=function(){if("undefined"==typeof this.seed.innerHTML)for(;this.seed.firstChild;)this.seed.removeChild(this.seed.firstChild);else this.seed.innerHTML="";return this},GrapeGroup.fn.toFront=function(){return this.each(Grape.fn.toFront)},Grape.fn.toFront=function(){var e=this.getParent();return null!==e&&(e.removeChild(this),e.addChild(this)),this},GrapeGroup.fn.toBack=function(){return this.each(Grape.fn.toBack)},Grape.fn.toBack=function(){var e=this.getParent();if(null!==e){if(e.seed.childNodes.length<2)return this;e.removeChild(this),e.seed.insertBefore(this.seed,e.seed.childNodes.item(0))}return this},GrapeGroup.fn.x=function(){return this._applyFunction(Grape.fn.x,arguments)},Grape.fn.x=function(e){return this.transform("x",e)},GrapeGroup.fn.y=function(){return this._applyFunction(Grape.fn.y,arguments)},Grape.fn.y=function(e){return this.transform("y",e)},GrapeGroup.fn.move=function(){return this._applyFunction(Grape.fn.move,arguments)},Grape.fn.move=function(e,t){return 2!=arguments.length?this:this.x(e).y(t)},GrapeGroup.fn.scale=function(){return this._applyFunction(Grape.fn.scale,arguments)},Grape.fn.scale=function(e){return this.scalex(e),this.scaley(e)},GrapeGroup.fn.scalex=function(){return this._applyFunction(Grape.fn.scalex,arguments)},Grape.fn.scalex=function(e){return this.transform("scalex",e)},GrapeGroup.fn.scaley=function(){return this._applyFunction(Grape.fn.scaley,arguments)},Grape.fn.scaley=function(e){return this.transform("scaley",e)},GrapeGroup.fn.rotation=function(){return this._applyFunction(Grape.fn.rotation,arguments)},Grape.fn.rotation=function(e){return this.transform("rotation",e)},GrapeGroup.fn.rotationcx=function(){return this._applyFunction(Grape.fn.rotationcx,arguments)},Grape.fn.rotationcx=function(e){return this.transform("rotationcx",e)},GrapeGroup.fn.rotationcy=function(){return this._applyFunction(Grape.fn.rotationcy,arguments)},Grape.fn.rotationcy=function(e){return this.transform("rotationcy",e)},GrapeGroup.fn.skewx=function(){return this._applyFunction(Grape.fn.skewx,arguments)},Grape.fn.skewx=function(e){return this.transform("skewx",e)},GrapeGroup.fn.skewy=function(){return this._applyFunction(Grape.fn.skewy,arguments)},Grape.fn.skewy=function(e){return this.transform("skewy",e)},GrapeGroup.fn.text=function(){return this._applyFunction(Grape.fn.text,arguments)},Grape.fn.text=function(e){if("undefined"==typeof e){for(var t=this.seed.childNodes,n="",r=0;r<t.length;r++)3==t.item(r).nodeType?n+=t.item(r).nodeValue:1==t.item(r).nodeType&&(n+=new Grape(t.item(r)).text());return n}for(var r=0;r<this.seed.childNodes.length;r++)3==this.seed.childNodes[r].nodeType&&(this.seed.childNodes[r].nodeValue="");return""!=e&&this.seed.appendChild(document.createTextNode(e)),this},GrapeGroup.fn.search=function(){var e=new GrapeGroup;return this.each(function(){this.search(arguments[0],arguments[1])&&e.push(this)},arguments),e},Grape.fn.search=function(e,t){return"string"!=typeof e?!1:1!=t?-1==raceme._clearString(this.text()).search(raceme._clearString(e))?!1:!0:-1==this.text().search(e)?!1:!0},GrapeGroup.fn.ajax=function(){return"undefined"!=typeof arguments[0]?raceme._likeArray(arguments[0])===!1?this.each(Grape.fn.ajax,arguments):this.eachValue(Grape.fn.ajax,arguments[0]):this},Grape.fn.ajax=function(e){return raceme.ajax.call(this,e),this},GrapeGroup.fn.removeAttr=function(){return this.each(Grape.fn.removeAttr,arguments)},Grape.fn.removeAttr=function(e){return"undefined"!=typeof e&&this.hasAttr(e)&&this.seed.removeAttribute(e),this},Grape.fn.hasAttr=function(e){return this.seed.hasAttribute(e)},GrapeGroup.fn.style=function(){if("undefined"!=typeof arguments[0]&&"undefined"!=typeof arguments[1])return raceme._likeArray(arguments[1])===!1?this.each(Grape.fn.style,arguments):this.eachValue(Grape.fn.style,arguments[1],arguments[0]);if(null===arguments[0])return this.each(function(){this.style(null)});var e=[];return this.each(function(){e.push(this.style(arguments[0]))},arguments),e},Grape.fn.style=function(e,t){if("undefined"==typeof e)return raceme._getStyle(this.seed);if(null===e)return this.attr("style",null);if(e=raceme._clearString(e),"undefined"==typeof t){var n=raceme._getStyle(this.seed);return"undefined"==typeof n[e]?"":n[e]}return null===t&&(t=""),this.seed.style.setProperty(e,t.toString(),""),this},GrapeGroup.fn.addTo=function(e){return e.addChild(this),this},Grape.fn.addTo=function(e){return e.addChild(this),this},GrapeGroup.fn.addClass=function(){return this._applyFunction(Grape.fn.addClass,arguments)},Grape.fn.addClass=function(e){if("undefined"!=typeof e&&null!==e){if(this.seed.classList)return this.seed.classList.add(e),this;0==this.containsClass(e)&&this.attr("class",this.attr("class")+" "+e)}return this},GrapeGroup.fn.removeClass=function(){return this.each(Grape.fn.removeClass,arguments)},Grape.fn.removeClass=function(e){if("undefined"==typeof e||null===e)return this.removeAttr("class");if(this.seed.classList)return this.seed.classList.remove(e),this;if(1==this.containsClass(e)){for(var t=this.attr("class").split(" "),n="",r=0;r<t.length;r++)t[r]!=e&&(n+=" "+t[r]);this.attr("class",n)}return this},GrapeGroup.fn.containsClass=function(e){for(var t=0;t<this.length;t++)if(this._items[t].containsClass(e))return!0;return!1},Grape.fn.containsClass=function(e){if("undefined"==typeof e)return!1;if(this.seed.classList)return this.seed.classList.contains(e);var t=this.attr("class").split(" ");return-1!=t.indexOf(e)?!0:!1},GrapeGroup.fn.getBBox=function(){var e=null,t=null,n=null,r=null;return this.each(function(){var i=this.getBBox();null===e?(e=i.x1,t=i.y1,n=i.x2,r=i.y2):(e=Math.min(e,i.x1),t=Math.min(t,i.y1),n=Math.max(n,i.x2),r=Math.max(r,i.y2))}),null===e?{x1:0,y1:0,width:0,height:0,x2:0,y2:0}:{x1:e,y1:t,width:n-e,height:r-t,x2:n,y2:r}},Grape.fn.getBBox=function(){var e={x:0,y:0,x1:0,y1:0,width:0,height:0,x2:0,y2:0};if(this.seed.getBBox)if(this.seed.ownerSVGElement){var t=this.seed.getBBox();e.x1=this.point(t.x,t.y).x,e.y1=this.point(t.x,t.y).y,e.width=t.width,e.height=t.height,e.x2=e.x1+e.width,e.y2=e.y1+e.height,e.x=e.x1,e.y=e.y1}else{var n=new Grape("svg"),r=new Grape(this.seed.cloneNode(!0));n.addTo(by("body").item(0)),n.addChild(r),e=r.getBBox(),n.remove()}else e={x:this.seed.offsetLeft,y:this.seed.offsetTop,width:this.seed.offsetWidth,height:this.seed.offsetHeight},e.x1=e.x,e.y1=e.y,e.x2=e.x1+e.width,e.y2=e.y1+e.height;return e},GrapeGroup.fn.lineStyle=function(){return this.each(Grape.fn.lineStyle,arguments)},Grape.fn.lineStyle=function(e,t,n,r,i,a,s){return this.isShape?null===this.getParent()?this:this.getParent().lineStyle(e,t,n,r,i,a,s):(this.current_stroke_thickness=raceme.dV(e,0),this.current_stroke_color=raceme.dV(t,"none"),this.current_stroke_caps=raceme.dV(r,"butt"),this.current_stroke_joints=raceme.dV(i,"miter"),this.current_stroke_miterLimit=raceme.dV(a,4),this.current_stroke_alpha=raceme.dV(n,1),this.current_stroke_dasharray=raceme.dV(s,"1"),this)},GrapeGroup.fn.beginFill=function(){return this.each(Grape.fn.beginFill,arguments)},Grape.fn.beginFill=function(e,t){return this.isShape&&null===this.getParent()?this:this.isShape?this.getParent().beginFill(e,t):(this.is_beginFill=!0,this.current_fill_color=raceme.dV(e,"none"),this.current_fill_alpha=raceme.dV(t,1),this)},GrapeGroup.fn.endFill=function(){return this.each(Grape.fn.endFill)},Grape.fn.endFill=function(){return this.isShape?null===this.getParent()?this:this.getParent().endFill():(this.is_beginFill=!1,this.current_fill_color="none",this.current_fill_alpha=1,this)},GrapeGroup.fn.beginPath=function(){return this.each(Grape.fn.beginPath,arguments)},Grape.fn.beginPath=function(e){return this.isShape?null===this.getParent()?this:this.getParent().beginPath(e):(this.is_beginPath=!0,this.current_path="",this.currentX=0,this.currentY=0,this.is_beginPath_closed=raceme.dV(e,!1),this)},GrapeGroup.fn.endPath=function(){return this.each(Grape.fn.endPath)},Grape.fn.endPath=function(){if(this.isShape)return null===this.getParent()?this:this.getParent().endPath();if(this.is_beginPath=!1,this.currentX=0,this.currentX=0,""!=this.current_path){this.is_beginPath_closed&&(this.current_path=this.current_path+" z");var e=new Grape("path");return e.attr("d",this.current_path),this._applyStroke(e),this._applyFill(e),e.addTo(this)}return this},GrapeGroup.fn.moveTo=function(){return this.each(Grape.fn.moveTo,arguments)},Grape.fn.moveTo=function(e,t){return this.isShape?null===this.getParent()?this:this.getParent().moveTo(e,t):(e=raceme.dV(e,0),t=raceme.dV(t,0),this.is_beginPath&&(this.current_path=this.current_path+"M "+e+" "+t+" "),this.currentX=e,this.currentY=t,this)},GrapeGroup.fn.lineTo=function(){return this.each(Grape.fn.lineTo,arguments)},Grape.fn.lineTo=function(e,t,n){if(0!=n&&(n=!0),this.isShape)return null===this.getParent()?this:this.getParent().lineTo(e,t);if(e=raceme.dV(e,0),t=raceme.dV(t,0),!this.is_beginPath){var r=new Grape("line");return e!=this.currentX&&t!=this.currentY||!n||r.attr("shape-rendering","crispEdges"),r.attr("x1",this.currentX).attr("y1",this.currentY).attr("x2",e).attr("y2",t),this._applyStroke(r),this._applyFill(r),r.addTo(this)}return""==this.current_path&&this.moveTo(0,0),this.current_path+="L "+e+" "+t+" ",this.currentX=e,this.currentY=t,this},GrapeGroup.fn.line=function(){return this.each(Grape.fn.line,arguments)},Grape.fn.line=function(e,t,n,r,i){return this.isShape?null===this.getParent()?this:this.getParent().line(e,t,n,r,i):this.moveTo(e,t).lineTo(n,r,i)},GrapeGroup.fn.circle=GrapeGroup.fn.ellipse=function(){return this.each(Grape.fn.circle,arguments)},Grape.fn.circle=Grape.fn.ellipse=function(e,t,n,r){if(this.isShape)return null===this.getParent()?this:Grape.fn.circle.call(this.getParent(),e,t,n,r);if(!this.is_beginPath&&arguments.length>0){var i;return 1==arguments.length?i=new Grape("circle").attr("cx",this.currentX).attr("cy",this.currentY).attr("r",e):2==arguments.length?i=new Grape("ellipse").attr("cx",this.currentX).attr("cy",this.currentY).attr("rx",e).attr("ry",t):3==arguments.length?i=new Grape("circle").attr("cx",e).attr("cy",t).attr("r",n):(i=new Grape("ellipse").attr("cx",e).attr("cy",t).attr("rx",n),attr("ry",r)),this._applyStroke(i),this._applyFill(i),i.addTo(this)}return this},GrapeGroup.fn.rect=function(){return this.each(Grape.fn.rect,arguments)},Grape.fn.rect=function(e,t,n,r,i,a){if(this.isShape)return null===this.getParent()?this:Grape.fn.rect.apply(this.getParent(),arguments);if(!this.is_beginPath&&arguments.length>0){var s=new Grape("rect");return 1==arguments.length?s.attr("x",this.currentX).attr("y",this.currentY).attr("width",e).attr("height",e).attr("shape-rendering","crispEdges"):2==arguments.length?s.attr("x",this.currentX).attr("y",this.currentY).attr("width",e).attr("height",t).attr("shape-rendering","crispEdges"):3==arguments.length?s.attr("x",e).attr("y",t).attr("width",n).attr("height",n).attr("shape-rendering","crispEdges"):4==arguments.length?s.attr("x",e).attr("y",t).attr("width",n).attr("height",r).attr("shape-rendering","crispEdges"):5==arguments.length?s.attr("x",e).attr("y",t).attr("width",n).attr("height",r).attr("rx",i):s.attr("x",e).attr("y",t).attr("width",n).attr("height",r).attr("rx",i).attr("ry",a),this._applyStroke(s),this._applyFill(s),s.addTo(this)}return this},GrapeGroup.fn.arcTo=function(){return this.each(Grape.fn.arcTo,arguments)},Grape.fn.arcTo=function(e,t,n,r,i){return arguments.length<3?this:(r=raceme.dV(r,0),i=raceme.dV(i,1),this.is_beginPath&&(""==this.current_path&&this.moveTo(0,0),this.current_path+="A "+n+" "+n+" 0 "+r+" "+i+" "+e+" "+t+" "),this)},GrapeGroup.fn.curveTo=function(){return this.each(Grape.fn.curveTo,arguments)},Grape.fn.curveTo=function(e,t,n,r,i,a){return 6!=arguments.length?this:(this.is_beginPath&&(""==this.current_path&&this.moveTo(0,0),this.current_path+="C "+n+" "+r+" "+i+" "+a+" "+e+" "+t+" "),this)},GrapeGroup.squircle=function(){return this.each(Grape.fn.squircle,arguments)},Grape.fn.squircle=function(e,t,n,r){if(this.isShape)return null===this.getParent()?this:this.getParent().squircle(e,t,n,r);if(0==this.is_beginPath){var i=0,a=0,s=0,o=0;if(1==arguments.length)i=this.currentX,a=this.currentY,s=e,o=s;else if(2==arguments.length)i=this.currentX,a=this.currentY,s=e,o=t;else if(3==arguments.length)i=e,a=t,s=n,o=s;else{if(4!=arguments.length)return this;i=e,a=t,s=n,o=r}return this.beginPath(),this.moveTo(i,a+o/2),this.curveTo(i+s/2,a+o,i,a+o,i,a+o),this.curveTo(i+s,a+o/2,i+s,a+o,i+s,a+o),this.curveTo(i+s/2,a,i+s,a,i+s,a),this.curveTo(i,a+o/2,i,a,i,a),this.endPath()}return this},GrapeGroup.fn.arc=function(){return this.each(Grape.fn.arc,arguments)},Grape.fn.arc=function(e,t,n,r,i,a){if(this.isShape)return null===this.getParent()?this:this.getParent().arc(e,t,n,r,i,a);if(!this.is_beginPath){if(e=raceme.dV(e,0),t=raceme.dV(t,0),n=raceme.dV(n,10),r=raceme.dV(r,0),i=raceme.dV(i,360),a=raceme.dV(a,!1),r=Math.max(Math.min(r,360),-360),i=Math.max(Math.min(i,360),-360),0>r&&(r=360-r),0>i&&(i=360-i),r>i){var s=r;r=i,i=s}if(i-r>=360)return this.circle(e,t,n);var o=0;i-r>180&&(o=1);var u=e+raceme.polar2rect(n,r).x,h=t+raceme.polar2rect(n,r).y,c=e+raceme.polar2rect(n,i).x,l=t+raceme.polar2rect(n,i).y;if(a)return this.beginPath(!0),this.moveTo(e,t).lineTo(u,h).arcTo(c,l,n,o),this.endPath(),this;if(this.is_beginFill&&"none"!=this.current_fill_color){var f=this.current_stroke_color;this.current_stroke_color="none",this.beginPath(!0),this.moveTo(e,t).lineTo(u,h).arcTo(c,l,n,o),this.endPath(),this.current_stroke_color=f,this.is_beginFill=!1,this.beginPath(!1),this.moveTo(u,h).arcTo(c,l,n,o),this.endPath(),this.is_beginFill=!0}else this.beginPath(!1),this.moveTo(u,h).arcTo(c,l,n,o),this.endPath()}return this},GrapeGroup.fn.pieSlice=function(){return this.each(Grape.fn.pieSlice,arguments)},Grape.fn.pieSlice=function(e,t,n,r,i,a){if(this.isShape)return null===this.getParent()?this:this.getParent().pieSlice(e,t,n,r);if(!this.is_beginPath){if(e=raceme.dV(e,0),t=raceme.dV(t,0),i=raceme.dV(i,0),a=raceme.dV(a,0),n=raceme.dV(n,0),r=raceme.dV(r,360),n+90>r+90){var s=n;n=r,r=s}r-n>=360&&(r-=1e-5);var o=0;r-n>180&&(o=1);var u=i+raceme.polar2rect(e,n).x,h=a+raceme.polar2rect(e,n).y,c=i+raceme.polar2rect(e,r).x,l=a+raceme.polar2rect(e,r).y,f=i+raceme.polar2rect(t,n).x,m=a+raceme.polar2rect(t,n).y,p=i+raceme.polar2rect(t,r).x,d=a+raceme.polar2rect(t,r).y;this.beginPath(!0),this.moveTo(u,h).arcTo(c,l,e,o).lineTo(p,d).arcTo(f,m,t,o,0),this.endPath()}return this},GrapeGroup.fn.label=function(){return this.each(Grape.fn.label,arguments)},Grape.fn.label=function(e,t,n,r,i,a,s,o){return this.isShape?null===this.getParent()?this:this.getParent().label(e,t,n,r,i,a,s,o):this.is_beginPath?this:raceme.label(e,t,n,r,i,a,s,o).addTo(this)},GrapeGroup.fn.image=function(){return this.each(Grape.fn.image,arguments)},Grape.fn.image=function(e,t,n,r,i){return this.isShape?null===this.getParent()?this:this.getParent().image(e,t,n,r,i):"filter"==this.tagName()||null!=this.getParent()&&"filter"==this.getParent().tagName()?this.fe("feImage"):this.is_beginPath?thid:raceme.image(e,t,n,r,i).addTo(this)},GrapeGroup.fn.enableEvents=function(){return this.each(Grape.fn.enableEvents,arguments)},Grape.fn.enableEvents=function(e){return e===!1?this.style("pointer-events","none"):this.style("pointer-events","visible")},GrapeGroup.fn.addEvent=function(){return this.each(Grape.fn.addEvent,arguments)},Grape.fn.addEvent=function(e,t,n){if("string"!=typeof e||"undefined"==typeof t)return this;var r=this,i=function(n){"paste"==e?setTimeout(function(){t.call(r,n)},0):t.call(r,n),"mousedown"!=e&&"paste"!=e&&"keypress"!=e&&"keydown"!=e&&"keyup"!=e&&"mousewheel"!=e&&"DOMMouseScroll"!=e&&"mousemove"!=e&&n.preventDefault()};return this._events.push(new GrapeEvent(e,i,n)),"load"!=e||"image"!=this.tagName()&&"IMG"!=this.tagName()?this.seed.addEventListener?this.seed.addEventListener(e,i):this.seed.attachEvent&&this.seed.attachEvent(e,i):(this._img=new Image,this._img.addEventListener?this._img.addEventListener("load",i,!1):this._img.attachEvent&&this._img.attachEvent("load",i,!1),"image"==this.tagName()?this._img.src=this.attr("href"):this._img.src=this.attr("src"),this.seed.src=this._img.src),"mouse_leave"==e?this.seed.addEventListener?this.seed.addEventListener("mouseout",this._onmouseleave):this.seed.attachEvent&&this.seed.attachEvent("mouseout",this._onmouseleave):"mouse_enter"==e&&(this.seed.addEventListener?this.seed.addEventListener("mouseover",this._onmouseenter):this.seed.attachEvent&&this.seed.attachEvent("mouseover",this._onmouseenter)),this},GrapeGroup.fn.removeEvent=function(){return this.each(Grape.fn.removeEvent,arguments)},Grape.fn.removeEvent=function(e){for(var t=[],n=0;n<this._events.length;n++)"undefined"==typeof e||null===e||this._events[n]._id==e||this._events[n]._type==e?("load"==this._events[n]._type&&null!=this._img&&this._img.removeEventListener("load",this._events[n]._function),"mouse_leave"==this._events[n]._type&&this.seed.removeEventListener("mouseout",this._onmouseleave),"mouse_enter"==this._events[n]._type&&this.seed.removeEventListener("mouseover",this._onmouseenter),this.seed.removeEventListener(this._events[n]._type,this._events[n]._function)):t.push(this._events[n]);return this._events=t,this},GrapeGroup.fn.trigger=function(){return this.each(Grape.fn.trigger,arguments)},Grape.fn.trigger=function(e){if("focus"==e)return this.seed.focus(),this;if("blur"==e&&this.seed.blur)return this.seed.blur(),this;if("click"==e&&this.seed.click)return this.seed.click(),this;e=raceme.dV(e,"");for(var t=0;t<this._events.length;t++)if(""==e||this._events[t]._id==e||this._events[t]._type==e){
var n=raceme._newEvent(this._events[t]._type);this.seed.dispatchEvent(n)}return this},GrapeGroup.fn.click=GrapeGroup.fn.clic=function(){return this.each(Grape.fn.click,arguments)},Grape.fn.click=Grape.fn.clic=function(e,t,n){return 0==arguments.length?this.trigger("click"):(n=raceme.dV(n,!0),n===!0&&this.style("cursor","pointer"),this.addEvent("click",e,t))},GrapeGroup.fn.dblclick=GrapeGroup.fn.dblclic=function(){return this.each(Grape.fn.dblclick,arguments)},Grape.fn.dblclick=Grape.fn.dblclic=function(e,t,n){return 0==arguments.length?this.trigger("dblclick"):(n=raceme.dV(n,!1),n===!0&&this.style("cursor","pointer"),this.addEvent("dblclick",e,t))},GrapeGroup.fn.dbltap=function(){return this.each(Grape.fn.dbltap,arguments)},Grape.fn.dbltap=function(e,t){var n=this;this.touchstart(function(t){n.raceme_tmp_tapped?(clearTimeout(n.raceme_tmp_tapped),n.raceme_tmp_tapped=null,e.call(n,t)):n.raceme_tmp_tapped=setTimeout(function(){n.raceme_tmp_tapped=null},300)})},GrapeGroup.fn.fixedclic=GrapeGroup.fn.fixedclick=function(){return this.each(Grape.fn.fixedclic,arguments)},Grape.fn.fixedclic=Grape.fn.fixedclick=function(e,t,n){if(0==arguments.length)return this.trigger("fixedclic");n=raceme.dV(n,!0),n===!0&&this.style("cursor","pointer"),this.mousedown(function(e){this.temporal_cursor_position={x:e.clientX,y:e.clientY}}),this.touchstart(function(e){e.touches&&e.touches[0]&&(this.temporal_cursor_position={x:e.touches[0].clientX,y:e.touches[0].clientY})});var r=this;return this.touchend(function(t){t.changedTouches&&t.changedTouches[0]&&raceme.distance(this.temporal_cursor_position,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY})<6&&e.call(r,t)}),this.mouseup(function(t){this.temporal_cursor_position&&raceme.distance(this.temporal_cursor_position,{x:t.clientX,y:t.clientY})<6&&e.call(r,t)})},GrapeGroup.fn.mousedown=function(){return this.each(Grape.fn.mousedown,arguments)},Grape.fn.mousedown=function(e,t){return 0==arguments.length?this.trigger("mousedown"):this.addEvent("mousedown",e,t)},GrapeGroup.fn.touchstart=function(){return this.each(Grape.fn.touchstart,arguments)},Grape.fn.touchstart=function(e,t){return 0==arguments.length?this.trigger("touchstart"):this.addEvent("touchstart",e,t)},GrapeGroup.fn.mouseup=function(){return this.each(Grape.fn.mouseup,arguments)},Grape.fn.mouseup=function(e,t){return 0==arguments.length?this.trigger("mouseup"):this.addEvent("mouseup",e,t)},GrapeGroup.fn.touchend=function(){return this.each(Grape.fn.touchend,arguments)},Grape.fn.touchend=function(e,t){return 0==arguments.length?this.trigger("touchend"):this.addEvent("touchend",e,t)},GrapeGroup.fn.mousemove=function(){return this.each(Grape.fn.mousemove,arguments)},Grape.fn.mousemove=function(e,t){return 0==arguments.length?this.trigger("mousemove"):this.addEvent("mousemove",e,t)},GrapeGroup.fn.touchmove=function(){return this.each(Grape.fn.touchmove,arguments)},Grape.fn.touchmove=function(e,t){return 0==arguments.length?this.trigger("touchmove"):this.addEvent("touchmove",e,t)},GrapeGroup.fn.mouseover=function(){return this.each(Grape.fn.mouseover,arguments)},Grape.fn.mouseover=function(e,t){return 0==arguments.length?this.trigger("mouseover"):this.addEvent("mouseover",e,t)},GrapeGroup.fn.mouseenter=function(){return this.each(Grape.fn.mouseenter,arguments)},Grape.fn.mouseenter=function(e,t){return 0==arguments.length?this.trigger("mouse_enter"):this.addEvent("mouse_enter",e,t)},GrapeGroup.fn.mouseleave=function(){return this.each(Grape.fn.mouseleave,arguments)},Grape.fn.mouseleave=function(e,t){return 0==arguments.length?this.trigger("mouse_leave"):this.addEvent("mouse_leave",e,t)},GrapeGroup.fn.mouseout=function(){return this.each(Grape.fn.mouseout,arguments)},Grape.fn.mouseout=function(e,t){return 0==arguments.length?this.trigger("mouseout"):this.addEvent("mouseout",e,t)},GrapeGroup.fn.mousewheel=function(){return this.each(Grape.fn.mousewheel,arguments)},Grape.fn.mousewheel=function(e,t){return 0==arguments.length&&(this.trigger("mousewheel"),this.trigger("DOMMouseScroll")),this.addEvent("mousewheel",e,t),this.addEvent("DOMMouseScroll",e,t)},GrapeGroup.fn.drag=function(){return this.each(Grape.fn.drag,arguments)},Grape.fn.drag=function(e,t,n){if("undefined"==typeof e)return this;var r=this;return this.touchstart(function(i){e.call(r,i),r._initDrag(i,t,n)}),this.mousedown(function(i){3!=i.which&&(e.call(r,i),r._initDrag(i,t,n))})},GrapeGroup.fn.change=function(){return this.each(Grape.fn.change,arguments)},Grape.fn.change=function(e,t){return 0==arguments.length?this.trigger("change"):this.addEvent("change",e,t)},GrapeGroup.fn.load=function(){return this.each(Grape.fn.load,arguments)},Grape.fn.load=function(e,t){return 0==arguments.length?this.trigger("load"):this.addEvent("load",e,t)},GrapeGroup.fn.paste=function(){return this.each(Grape.fn.paste,arguments)},Grape.fn.paste=function(e,t){return 0==arguments.length?this.trigger("paste"):this.addEvent("paste",e,t)},GrapeGroup.fn.blur=function(){return this.each(Grape.fn.blur,arguments)},Grape.fn.blur=function(e,t){return 0==arguments.length?this.trigger("blur"):this.addEvent("blur",e,t)},GrapeGroup.fn.focus=function(){return this.each(Grape.fn.focus,arguments)},Grape.fn.focus=function(e,t){return 0==arguments.length?this.trigger("focus"):this.addEvent("focus",e,t)},GrapeGroup.fn.keypress=function(){return this.each(Grape.fn.keypress,arguments)},Grape.fn.keypress=function(e,t){return 0==arguments.length?this.trigger("keypress"):this.addEvent("keypress",e,t)},GrapeGroup.fn.keydown=function(){return this.each(Grape.fn.keydown,arguments)},Grape.fn.keydown=function(e,t){return 0==arguments.length?this.trigger("keydown"):this.addEvent("keydown",e,t)},GrapeGroup.fn.keyup=function(){return this.each(Grape.fn.keyup,arguments)},Grape.fn.keyup=function(e,t){return 0==arguments.length?this.trigger("keyup"):this.addEvent("keyup",e,t)},GrapeGroup.fn.select=function(){return this.each(Grape.fn.select,arguments)},Grape.fn.select=function(e,t){return 0==arguments.length?this.trigger("select"):this.addEvent("select",e,t)},GrapeGroup.fn.input=function(){return this.each(Grape.fn.input,arguments)},Grape.fn.input=function(e,t){return 0==arguments.length?this.trigger("input"):this.addEvent("input",e,t)},GrapeGroup.fn.scroll=function(){return this.each(Grape.fn.scroll,arguments)},Grape.fn.scroll=function(e,t){return 0==arguments.length?this.trigger("input"):this.addEvent("scroll",e,t)},GrapeGroup.fn.error=function(){return this.each(Grape.fn.error,arguments)},Grape.fn.error=function(e,t){return 0==arguments.length?this.trigger("input"):this.addEvent("error",e,t)},GrapeGroup.fn.animate=function(e,t){var n=new AnimationGroup(this,e,t);return this._animations.push(n),n},Grape.fn.animate=function(e,t){var n=new GrapeAnimation(this,e,t);return this._animations.push(n),n},GrapeGroup.fn.delay=function(e){return this.animate(0,e)},Grape.fn.delay=function(e){return this.animate(0,e)},GrapeGroup.fn.ease=function(){return this.eachAnimation(AnimationGroup.fn.ease,arguments)},Grape.fn.ease=function(){return this.eachAnimation(GrapeAnimation.fn.ease,arguments)},GrapeGroup.fn.stop=function(){return this.eachAnimation(AnimationGroup.fn.stop)},Grape.fn.stop=function(){return this.eachAnimation(GrapeAnimation.fn.stop)},GrapeGroup.fn.restart=function(){return this.eachAnimation(AnimationGroup.fn.restart)},Grape.fn.restart=function(){return this.eachAnimation(GrapeAnimation.fn.restart)},GrapeGroup.fn.pause=function(){return this.eachAnimation(AnimationGroup.fn.pause,arguments)},Grape.fn.pause=function(){return this.eachAnimation(GrapeAnimation.fn.pause,arguments)},GrapeGroup.fn.resume=function(){return this.eachAnimation(AnimationGroup.fn.resume)},Grape.fn.resume=function(){return this.eachAnimation(GrapeAnimation.fn.resume)},GrapeGroup.fn.togglePause=function(){return this.eachAnimation(AnimationGroup.fn.togglePause)},Grape.fn.togglePause=function(){return this.eachAnimation(GrapeAnimation.fn.togglePause)},GrapeGroup.fn.item=function(e){return 0==this.length?null:"undefined"==typeof e?this.item(this.length-1):e>=0&&e<this.length?this._items[e]:null},GrapeGroup.fn.each=function(e,t){for(var n=0;n<this.length;n++)e.apply(this._items[n],t);return this},GrapeGroup.fn.sort=function(e){return this._items.sort(e),this},GrapeGroup.fn.eachValue=function(e,t,n){if("undefined"==typeof n)for(var r=0;r<this.length&&r<t.length;r++)e.call(this._items[r],t[r]);else for(var r=0;r<this.length&&r<t.length;r++)e.call(this._items[r],n,t[r]);return this},GrapeGroup.fn.eachAnimation=function(e,t){for(var n=0;n<this._animations.length;n++)e.apply(this._animations[n],t);return this},GrapeGroup.fn.lastItem=function(){return this.item()},GrapeGroup.fn.firstItem=function(){return this.item(0)},GrapeGroup.fn.push=function(e){if("undefined"==typeof e)return this;if("undefined"!=typeof e._items)for(var t=0;t<e.length;t++)this.push(e._items[t]);else this._items.push(e),this.length++;return this},GrapeGroup.fn._applyFunction=function(e,t){if("undefined"!=typeof t[0])return raceme._likeArray(t[0])===!1?this.each(e,t):this.eachValue(e,t[0]);var n=[];return this.each(function(){n.push(e.call(this))}),n},Grape.fn.save=function(e){e=raceme.dV(e,"svg.svg");var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(this.seed))),t.setAttribute("download",e),t.click()},Grape.fn.addChild=function(e){if(e instanceof Grape)this.seed.appendChild(e.seed);else if(e instanceof GrapeGroup){for(var t=document.createDocumentFragment(),n=0;n<e.length;n++)t.appendChild(e.item(n).seed);this.seed.appendChild(t)}else if("string"==typeof e){var r,i;window.DOMParser?(r=new DOMParser,i=r.parseFromString(e,"application/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(e)),"svg"==i.documentElement.tagName&&i.documentElement.style.setProperty("overflow","hidden"),this.seed.appendChild(i.documentElement)}else e.nodeType&&(9==e.nodeType?("svg"==e.documentElement.tagName&&e.documentElement.style.setProperty("overflow","hidden"),this.seed.appendChild(e.documentElement)):1==e.nodeType&&("svg"==e.tagName&&e.style.setProperty("overflow","hidden"),this.seed.appendChild(e)));return this},Grape.fn.removeChild=function(e){return e instanceof Grape&&this.seed.removeChild(e.seed),this},Grape.fn.replace=function(e){return e instanceof Grape&&(this.seed.parentNode&&this.seed.parentNode.replaceChild(e.seed,this.seed),this.seed=e.seed,this.seed._grape=this),this},GrapeGroup.fn.filter=function(){return this.each(Grape.fn.filter,arguments)},Grape.fn.filter=function(e){if(e instanceof Grape&&"filter"==e.tagName()){var t=e.id();""===t&&(t=raceme._generateId(),e.id(t)),this.style("filter","url(#"+t+")")}else"string"==typeof e&&raceme.by("id:"+e)instanceof Grape&&"filter"==raceme.by("id:"+e).tagName()&&this.style("filter","url(#"+e+")");return this},Grape.fn.fe=function(e){return"filter"===this.tagName()?new Grape(e).addTo(this):"filter"===this.getParent().tagName()?new Grape(e).addTo(this.getParent()):this},Grape.fn.blend=function(){return this.fe("feBlend")},Grape.fn.colorMatrix=function(){return this.fe("feColorMatrix")},Grape.fn.componentTransfer=function(){return this.fe("feComponentTransfer")},Grape.fn.funcA=function(){return"feComponentTransfer"===this.tagName()?new Grape("feFuncA").addTo(this):("feFunc"===this.tagName().substr(0,this.tagName().length-1)&&"feComponentTransfer"===this.getParent().tagName()&&this.getParent().funcA(),this)},Grape.fn.funcR=function(){return"feComponentTransfer"===this.tagName()?new Grape("feFuncR").addTo(this):("feFunc"===this.tagName().substr(0,this.tagName().length-1)&&"feComponentTransfer"===this.getParent().tagName()&&this.getParent().funcR(),this)},Grape.fn.funcG=function(){return"feComponentTransfer"===this.tagName()?new Grape("feFuncG").addTo(this):("feFunc"===this.tagName().substr(0,this.tagName().length-1)&&"feComponentTransfer"===this.getParent().tagName()&&this.getParent().funcG(),this)},Grape.fn.funcB=function(){return"feComponentTransfer"===this.tagName()?new Grape("feFuncB").addTo(this):("feFunc"===this.tagName().substr(0,this.tagName().length-1)&&"feComponentTransfer"===this.getParent().tagName()&&this.getParent().funcB(),this)},Grape.fn.composite=function(){return this.fe("feComposite")},Grape.fn.convolveMatrix=function(){return this.fe("feConvolveMatrix")},Grape.fn.diffuseLighting=function(){return this.fe("feDiffuseLighting")},Grape.fn.displacementMap=function(){return this.fe("feDisplacementMap")},Grape.fn.flood=function(){return this.fe("feFlood")},Grape.fn.gaussianBlur=function(){return this.fe("feGaussianBlur")},Grape.fn.merge=function(){return this.fe("feMerge")},Grape.fn.morphology=function(){return this.fe("feMorphology")},Grape.fn.offset=function(){return this.fe("feOffset")},Grape.fn.specularLighting=function(){return this.fe("feSpecularLighting")},Grape.fn.tile=function(){return this.fe("feTile")},Grape.fn.turbulence=function(){return this.fe("feTurbulence")},Grape.fn.mergeNode=function(){return"feMerge"===this.tagName()?new Grape("feMergeNode").addTo(this):"feMergeNode"===this.tagName()&&"feMerge"===this.getParent().tagName()?this.getParent().mergeNode():this},Grape.fn.shadow=function(e,t,n,r){return"filter"===this.tagName()?(e=raceme.dV(e,0),t=raceme.dV(t,0),n=raceme.dV(n,1),r=raceme.dV(r,1),this.gaussianBlur().attr("in","SourceAlpha").attr("stdDeviation",n),this.offset().attr("dx",e).attr("dy",t).attr("result","offsetblur"),this.componentTransfer().funcA().attr("type","linear").attr("slope",r),this.merge().mergeNode().mergeNode().attr("in","SourceGraphic"),this):this.getParent()&&"filter"===this.getParent().tagName()?this.getParent().shadow(e,t,n,r):this},Grape.fn.getPolygon=function(e){e=raceme.dV(e,!0);var t=new raceme.Polygon;if("path"==this.tagName()){var n=this.seed,r=n.getTotalLength(),i=n.getPointAtLength(0),a=(n.getPathSegAtLength(0),Math.max(parseInt(r/50),1));e?t.add(raceme._elementPoint(this.seed,i.x,i.y)):t.add({x:i.x,y:i.y});for(var s=1;r>s;s+=a)i=n.getPointAtLength(s),e?t.add(raceme._elementPoint(this.seed,i.x,i.y)):t.add({x:i.x,y:i.y})}return(t.item(0).x!=t.item(t.length-1).x||t.item(0).y!=t.item(t.length-1).y)&&t.add({x:t.item(0).x,y:t.item(0).y}),t},Grape.fn.getSubPaths=function(){var e=null,t=null,n=!0,r=new Array;if("path"==this.tagName()){var i=this.attr("d");i=i.split(/z|Z/);for(var a=0;a<i.length-1;a++){r[a]=new raceme.Polygon,i[a]=i[a].split(" ");for(var s=0;s<i[a].length;s++){var o=i[a][s].split(",");2==o.length?(null===e||0==n?(e=parseFloat(o[0]),t=parseFloat(o[1])):(e+=parseFloat(o[0]),t+=parseFloat(o[1])),r[a].add({x:e,y:t})):1==o.length&&("l"==o[0]||"m"==o[0]?n=!0:("M"==o[0]||"L"==o[0])&&(n=!1))}(r[a].item(r[a].length-1).x!=r[a].item(0).x||r[a].item(r[a].length-1).y!=r[a].item(0).y)&&r[a].add({x:r[a].item(0).x,y:r[a].item(0).y})}}return r},raceme.subpaths2path=function(e){for(var t="",n=0,r=0,i=0;i<e.length;i++){t+="m ";for(var a=0;a<e[i].length;a++){var s=e[i].item(a).x-n,o=e[i].item(a).y-r;t+=viz.Utils.round(s,1)+","+viz.Utils.round(o,1)+" ",n=e[i].item(a).x,r=e[i].item(a).y}t+=i==e.length-1?"z":"z "}return t},Grape.fn.tagName=function(){return this.seed.tagName},Grape.fn.id=function(e){return this.attr("id",e)},Grape.fn.viewbox=function(e,t,n,r){if("svg"===raceme._clearString(this.tagName())){var i=this.seed.viewBox.baseVal||{x:0,y:0,width:0,height:0};return"undefined"==typeof e?i:(i.x=e,"undefined"!=typeof t&&(i.y=t),"undefined"!=typeof n&&(i.width=n),"undefined"!=typeof r&&(i.height=r),this.attr("viewBox",i.x+" "+i.y+" "+i.width+" "+i.height))}return this},Grape.fn.point=function(e,t){return raceme._elementPoint(this.seed,e,t)},Grape.fn.selectedIndex=function(){return this.seed.selectedIndex},Grape.fn.selectedValue=function(){return this.seed.options[this.selectedIndex()].value},Grape.fn.selectedText=function(){return this.seed.options[this.selectedIndex()].text},Grape.fn.enable=function(){return this.seed.disabled=!1,this},Grape.fn.enabled=function(){return!this.seed.disabled},Grape.fn.disable=function(){return this.seed.disabled=!0,this},Grape.fn.disabled=function(){return this.seed.disabled},Grape.fn.checked=function(){return this.seed.checked},Grape.fn.clearOptions=function(){return this.seed.options.length=0,this},Grape.fn.pushOption=function(e,t){this.seed.options[this.seed.options.length]=new Option(e,t)},Grape.fn.value=function(e){return"undefined"==typeof e?this.seed.value:(this.seed.value=e,this)},GrapeGroup.fn.topOffset=function(){return this._applyFunction(Grape.fn.topOffset,arguments)},Grape.fn.topOffset=function(e){return"undefined"==typeof e?this.seed.offsetTop-this.seed.offsetParent.scrollTop:void(this.seed.offsetParent&&(this.seed.offsetParent.scrollTop=this.seed.offsetTop-e))},GrapeGroup.fn.scrollTop=function(){return this._applyFunction(Grape.fn.scrollTop,arguments)},Grape.fn.scrollTop=function(e){return"undefined"==typeof e?this.seed.scrollTop:(this.seed.scrollTop=e,this)},Grape.fn.eachAnimation=function(e,t){for(var n=0;n<this._animations.length;n++)e.apply(this._animations[n],t);return this},Grape.fn._applyStroke=function(e){return 0==this.current_stroke_thickness||"none"==this.current_stroke_color?this:("none"!=this.current_stroke_color&&e.attr("stroke",this.current_stroke_color),1!=this.current_stroke_thickness&&(e.attr("stroke-width",this.current_stroke_thickness),"butt"!=this.current_stroke_caps&&e.attr("stroke-linecap",this.current_stroke_caps),"miter"!=this.current_stroke_joints&&e.attr("stroke-linejoin",this.current_stroke_joints),4!=this.current_stroke_miterLimit&&e.attr("stroke-miterlimit",this.current_stroke_miterLimit)),1!=this.current_stroke_alpha&&e.attr("stroke-opacity",this.current_stroke_alpha),"1"!=this.current_stroke_dasharray&&e.attr("stroke-dasharray",this.current_stroke_dasharray),this)},Grape.fn._applyFill=function(e){return this.is_beginFill&&(e.style("fill",this.current_fill_color),1!=this.current_fill_alpha&&e.style("fill-opacity",this.current_fill_alpha)),this},Grape.fn.transform=function(e,t){if("undefined"==typeof this._transform&&(this._transform=raceme._transform2obj(this.attr("transform"))),"undefined"==typeof t)return this._transform[e];if(t=raceme._round(t,3),this._transform[e]==t)return this;if(this._transform[e]=t,this.seed.transform.baseVal&&this.seed.ownerSVGElement){this.seed.transform.baseVal.clear();var n=this.seed.ownerSVGElement.createSVGTransform();if(n.setTranslate(this._transform.x,this._transform.y),this.seed.transform.baseVal.appendItem(n),0!=this._transform.rotation||0!=this._transform.rotationcx||0!=this._transform.rotationcy){var r=this.seed.ownerSVGElement.createSVGTransform();r.setRotate(this._transform.rotation,this._transform.rotationcx,this._transform.rotationcy),this.seed.transform.baseVal.appendItem(r)}if(1!=this._transform.scalex||1!=this._transform.scaley){var i=this.seed.ownerSVGElement.createSVGTransform();i.setScale(this._transform.scalex,this._transform.scaley),this.seed.transform.baseVal.appendItem(i)}if(0!=this._transform.skewx){var a=this.seed.ownerSVGElement.createSVGTransform();a.setSkewX(this._transform.skewx),this.seed.transform.baseVal.appendItem(a)}if(0!=this._transform.skewy){var s=this.seed.ownerSVGElement.createSVGTransform();s.setSkewY(this._transform.skewy),this.seed.transform.baseVal.appendItem(s)}}else this.attr("transform",raceme._obj2transform(this._transform));return this},Grape.fn._startPanning=function(e){return this._panningX=e.clientX,this._panningY=e.clientY,e.touches&&e.touches[0]&&(this._panningX=e.touches[0].clientX,this._panningY=e.touches[0].clientY),null!==this.startPanning&&this.startPanning.call(this,e),!1},Grape.fn._changePanning=function(e){"undefined"==typeof this._panningX&&(this._panningX=e.clientX,this._panningY=e.clientY);var t=this._panningX-e.clientX,n=this._panningY-e.clientY,r=this.x()-t,i=this.y()-n;return r=Math.max(r,-(this._zoom_w*this.scale())+this._zoom_w-(this.scale()-1)*this._zoom_x),r=Math.min(r,-(this.scale()-1)*this._zoom_x),i=Math.max(i,-(this._zoom_h*this.scale())+this._zoom_h-(this.scale()-1)*this._zoom_y),i=Math.min(i,-(this.scale()-1)*this._zoom_y),this.move(r,i),this._panningX=e.clientX,this._panningY=e.clientY,null!==this.changePanning&&this.changePanning.call(this,e),!1},Grape.fn._endPanning=function(e){null!==this.endPanning&&this.endPanning.call(this,e)},Grape.fn._scrollMouse=function(e){0!=raceme.wheelValue(e)&&0==this._current_zooming&&(raceme.wheelValue(e)>0?this.zoomIn(e):this.zoomOut(e))},Grape.fn._initDrag=function(e,t,n){if(2!=e.button){var r=this,i=new Grape(document);"undefined"!=typeof t&&(i.touchmove(function(e){e.targetTouches[0]&&t.call(r,e.targetTouches[0])},"dragevents"),i.mousemove(function(e){t.call(r,e)},"dragevents")),i.touchend(function(e){e.changedTouches[0]&&r._endDrag(e.changedTouches[0],n,i)},"dragevents"),i.mouseup(function(e){r._endDrag(e,n,i)},"dragevents")}},Grape.fn._endDrag=function(e,t,n){n.removeEvent("dragevents"),"undefined"!=typeof t&&t.call(this,e)},Grape.fn._onmouseenter=function(e){var t=e.relatedTarget||e.fromElement;if(null!==t&&raceme._contains(e.currentTarget,t))return!1;var n=raceme._newEvent("mouse_enter");this.dispatchEvent(n)},Grape.fn._onmouseleave=function(e){var t=e.toElement||e.relatedTarget;if("undefined"!=typeof t&&null!==t&&raceme._contains(e.currentTarget,t))return!1;if(null===t){var n=e.target||e.srcElement;if(n!=e.currentTarget)return!1}var r;r=raceme._newEvent("mouse_leave"),this.dispatchEvent(r)},GenericAnimation=function(){},GenericAnimation.fn=GenericAnimation.prototype,GenericAnimation.fn.constructor=GenericAnimation,GenericAnimation.fn.x=function(e){return e=raceme.dV(e,0),this._start(e,Grape.fn.x),this},GenericAnimation.fn.y=function(e){return e=raceme.dV(e,0),this._start(e,Grape.fn.y),this},GenericAnimation.fn.move=function(e,t){return this.x(e).y(t)},GenericAnimation.fn.rotate=function(e){return e=raceme.dV(e,0),this._start(e,Grape.fn.rotation),this},GenericAnimation.fn.scale=function(e){return e=raceme.dV(e,1),this._start(e,Grape.fn.scale),this},GenericAnimation.fn.scalex=function(e){return e=raceme.dV(e,1),this._start(e,Grape.fn.scalex),this},GenericAnimation.fn.scaley=function(e){return e=raceme.dV(e,1),this._start(e,Grape.fn.scaley),this},GenericAnimation.fn.skewx=function(e){return e=raceme.dV(e,0),this._start(e,Grape.fn.skewx),this},GenericAnimation.fn.skewy=function(e){return e=raceme.dV(e,0),this._start(e,Grape.fn.skewy),this},GenericAnimation.fn.topOffset=function(e){return e=raceme.dV(e,0),this._start(e,Grape.fn.topOffset),this},GenericAnimation.fn.scrollTop=function(e){return e=raceme.dV(e,0),this._start(e,Grape.fn.scrollTop),this},GenericAnimation.fn.fill=function(e){return e=raceme.dV(e,0),this._start(e,Grape.fn.fill),this},GenericAnimation.fn.attr=function(e,t){return"undefined"==typeof e?this:(t=raceme.dV(t,0),this._start(t,Grape.fn.attr,e),this)},GenericAnimation.fn.style=function(e,t){return"undefined"==typeof e?this:(t=raceme.dV(t,0),this._start(t,Grape.fn.style,e),this)},GenericAnimation.fn.opacity=function(e){return this.style("opacity",e)},GenericAnimation.fn.width=function(e){return this.attr("width",e)},GenericAnimation.fn.height=function(e){return this.attr("height",e)},GenericAnimation.fn.show=function(){this._start(null,Grape.fn.show)},GenericAnimation.fn.hide=function(){this._start(null,Grape.fn.hide)},GenericAnimation.fn.done=function(e){return this._callback=e,this},GenericAnimation.fn.meanwhile=function(e){return this._meanwhile=e,this},GenericAnimation.fn.stop=function(){return this._next_animation&&this._next_animation.stop(),null!==this._interval&&raceme.clearInterval(this._interval),this._interval=null,this},GenericAnimation.fn.defrost=function(){if(this._freeze===!0){this._start_time=Date.now()||(new Date).getTime(),this._delayed=0,this._finish=this._start_time+this._duration+this._init_delay,this._freeze=!1;for(var e=0;e<this._freezeAnimations.length;e++)this._start(this._freezeAnimations[e].val,this._freezeAnimations[e].fun,this._freezeAnimations[e].attrPassed);this._freezeAnimations=[]}return this},GenericAnimation.fn.frost=function(){return this._freeze=!0,this},GenericAnimation.fn.animate=function(e,t){var n=new this.constructor(this._grape,e,t);return n._freeze=!0,this._next_animation=n,n},GenericAnimation.fn.ease=function(e,t){return this._easeFunction=raceme._getEaseFunction(e,t),this},GenericAnimation.fn.pause=function(e){return this._next_animation&&this._next_animation._freeze===!1?this._next_animation.pause(e):this._pause===!1?(this._pause=!0,this._paused_moment=Date.now()||(new Date).getTime(),"undefined"==typeof e?this._is_time_delayed=!1:(this._is_time_delayed=!0,this._delayed+=e)):"undefined"!=typeof e&&(this._is_time_delayed=!0,this._delayed+=e),this},GenericAnimation.fn.resume=function(){if(this._next_animation&&this._next_animation._freeze===!1)this._next_animation.resume();else{if(this._pause===!0){var e=Date.now()||(new Date).getTime(),t=e-this._paused_moment;this._finish+=t,this._is_time_delayed=!1}this._pause=!1}return this},GenericAnimation.fn.isPaused=function(){return this._pause?!0:this._next_animation&&this._next_animation._freeze===!1?this._next_animation.isPaused():!1},GenericAnimation.fn.togglePause=function(){return this.isPaused()?this.resume():this.pause()},GenericAnimation.fn.restart=function(){if(this.stop(),this._next_animation&&(this._next_animation.frost(),this._next_animation.restart()),this._concurrentAnimations.length>0){for(var e=[],t=0;t<this._concurrentAnimations.length;t++)e[t]=this._concurrentAnimations[t];this._concurrentAnimations=[],this._start_time=Date.now()||(new Date).getTime(),this._delayed=0,this._finish=this._start_time+this._duration+this._init_delay;for(var t=0;t<e.length;t++)if(raceme._likeArray(this._grape))for(var n=0;n<this._grape.length;n++)e[t].attrPassed?e[t].fun.call(this._grape.item(n),e[t].attrPassed,e[t].init_value[n]):e[t].fun.call(this._grape.item(n),e[t].init_value[n]);else e[t].attrPassed?e[t].fun.call(this._grape,e[t].attrPassed,e[t].init_value):e[t].fun.call(this._grape,e[t].init_value);for(var t=0;t<e.length;t++)this._start(e[t].val,e[t].fun,e[t].attrPassed)}},AnimationGroup=function(e,t,n){this._grape=e,this._duration=raceme.dV(t,2e3),this._easeFunction=raceme._getEaseFunction(),this._init_delay=raceme.dV(n,0),this._delayed=0,this._is_time_delayed=!1,this._dinterval=Math.min(16,this._duration),this._start_time=Date.now()||(new Date).getTime(),this._finish=this._start_time+this._duration+this._init_delay,this._interval=null,this._concurrentAnimations=[],this._freezeAnimations=[],this._freeze=!1,this._pause=!1,this._resume_pause_time=null},AnimationGroup.prototype=new GenericAnimation,AnimationGroup.fn=AnimationGroup.prototype,AnimationGroup.fn.constructor=AnimationGroup,AnimationGroup.fn._start=function(e,t,n){if(this._freeze===!1){for(var r=[],i=0;i<this._grape.length;i++)n?r[i]=t.call(this._grape.item(i),n):r[i]=t.call(this._grape.item(i));var a=[];a=raceme._likeArray(e)?e:raceme._filledArray(this._grape.length,e);for(var i=0;i<this._grape.length;i++)"string"==typeof a[i]&&a[i].length>2&&raceme._getRGB(a[i])===!1&&(a[i]=raceme._getOperation(r[i],a[i]));var s="number";if(raceme._getRGB(a[0])!==!1&&(s="color"),this._concurrentAnimations.push({val:a,fun:t,attrPassed:n,init_value:r,value_type:s}),null===this._interval){var o=this;this._interval=raceme.setInterval(function(){if(o._current_time=Date.now()||(new Date).getTime(),0==o._pause){if(o._current_time>o._start_time+o._init_delay+o._delayed){for(var e=1-(o._finish-o._current_time)/o._duration,t=o._easeFunction(e),n=0;n<o._grape.length;n++)for(var r=0;r<o._concurrentAnimations.length;r++){var i=o._concurrentAnimations[r];i.attrPassed?i.fun.call(o._grape.item(n),i.attrPassed,raceme.map(t,0,1,i.init_value[n],i.val[n])):i.fun.call(o._grape.item(n),raceme.map(t,0,1,i.init_value[n],i.val[n]))}if("undefined"!=typeof o._meanwhile&&null!==o._meanwhile&&o._meanwhile.call(o._grape,e,t),o._current_time>o._finish){for(var n=0;n<o._grape.length;n++)for(var r=0;r<o._concurrentAnimations.length;r++){var i=o._concurrentAnimations[r];i.attrPassed?i.fun.call(o._grape.item(n),i.attrPassed,i.val[n]):i.fun.call(o._grape.item(n),i.val[n])}raceme.clearInterval(o._interval),o._interval=null,"undefined"!=typeof o._callback&&o._callback.call(o._grape),o._next_animation instanceof AnimationGroup&&o._next_animation.defrost()}}}else 1==o._is_time_delayed&&o._current_time>o._start_time+o._init_delay+o._delayed&&o.resume()},this._dinterval)}}else this._freezeAnimations.push({val:e,fun:t,attrPassed:n})},GrapeAnimation.prototype=new GenericAnimation,GrapeAnimation.fn=GrapeAnimation.prototype,GrapeAnimation.fn.constructor=GrapeAnimation,GrapeAnimation.fn._start=function(e,t,n){if(this._freeze===!1){var r;null!==e&&(r=n?t.call(this._grape,n):t.call(this._grape));var i="number";if("string"==typeof e&&e.length>2&&raceme._getRGB(e)===!1&&(e=raceme._getOperation(r,e)),this._concurrentAnimations.push({val:e,fun:t,attrPassed:n,init_value:r,value_type:i}),null===this._interval){var a=this;this._interval=raceme.setInterval(function(){if(a._current_time=Date.now()||(new Date).getTime(),0==a._pause){if(a._current_time>a._start_time+a._init_delay+a._delayed){for(var e=1-(a._finish-a._current_time)/a._duration,t=a._easeFunction(e),n=0;n<a._concurrentAnimations.length;n++){var r=a._concurrentAnimations[n];null!==r.val&&(r.attrPassed?r.fun.call(a._grape,r.attrPassed,raceme.map(t,0,1,r.init_value,r.val)):r.fun.call(a._grape,raceme.map(t,0,1,r.init_value,r.val)))}if("undefined"!=typeof a._meanwhile&&null!==a._meanwhile&&a._meanwhile.call(a._grape,e,t),a._current_time>a._finish){for(var n=0;n<a._concurrentAnimations.length;n++){var r=a._concurrentAnimations[n];r.attrPassed?r.fun.call(a._grape,r.attrPassed,r.val):r.fun.call(a._grape,r.val)}raceme.clearInterval(a._interval),a._interval=null,"undefined"!=typeof a._callback&&a._callback.call(a._grape),a._next_animation instanceof GrapeAnimation&&a._next_animation.defrost()}}}else 1==a._is_time_delayed&&a._current_time>a._start_time+a._init_delay+a._delayed&&a.resume()},this._dinterval)}}else this._freezeAnimations.push({val:e,fun:t,attrPassed:n})},raceme._execute_main_scripts=function(){raceme.by("svg").style("overflow","hidden");var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(window.requestAnimationFrame=e,"undefined"!=typeof _main_scripts)for(var t=0;t<_main_scripts.length;t++)_main_scripts[t].call(window)},restart=function(){(this instanceof Grape||this instanceof GrapeGroup)&&this.restart()},raceme._generateId=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)});return t},raceme._getEaseFunction=function(e,t){if(e=raceme.dV(e,"linear"),"linear"==e)return raceme.linear_function;if(t=raceme.dV(t,"cube"),"inBounce"==e)return raceme.inBounce;if("bounce"==e||"outBounce"==e)return raceme.outBounce;if("inoutBounce"==e)return raceme.inoutBounce;if("sin"==t)return"inout"==e?raceme.inoutSin:"in"==e?raceme.inSin:raceme.outSin;if("quad"==t)return"inout"==e?raceme.inoutQuad:"in"==e?raceme.inQuad:raceme.outQuad;if("cube"==t)return"inout"==e?raceme.inoutCube:"in"==e?raceme.inCube:raceme.outCube;if("qrt"==t)return"inout"==e?raceme.inoutQrt:"in"==e?raceme.inQrt:raceme.outQrt;if("qnt"==t)return"inout"==e?raceme.inoutQnt:"in"==e?raceme.inQnt:raceme.outQnt;if("expo"==t)return"inout"==e?raceme.inoutExpo:"in"==e?raceme.inExpo:outExpo;if("circ"==t){if("inout"==e)return raceme.inoutCirc;if("in"==e)return raceme.inCirc}return raceme.linear_function},raceme._check=function(e){return e=raceme.dV(e,0),Math.max(0,Math.min(1,e))},raceme.linear_function=function(e){return e=raceme._check(e)},raceme.inoutSin=function(e){return e=raceme._check(e),-.5*(Math.cos(Math.PI*e)-1)},raceme.inSin=function(e){return e=raceme._check(e),-Math.cos(e*Math.PI/2)+1},raceme.outSin=function(e){return e=raceme._check(e),
Math.sin(e*Math.PI/2)},raceme.inoutQuad=function(e){return e=raceme._check(e),(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},raceme.inQuad=function(e){return e=raceme._check(e),e*e},raceme.outQuad=function(e){return e=raceme._check(e),-e*(e-2)},raceme.inoutCube=function(e){return e=raceme._check(e),(e/=.5)<1?.5*e*e*e:(e-=2,.5*(e*e*e+2))},raceme.inCube=function(e){return e=raceme._check(e),e*e*e},raceme.outCube=function(e){return e=raceme._check(e),--e*e*e+1},raceme.inoutQrt=function(e){return e=raceme._check(e),(e/=.5)<1?.5*e*e*e*e:(e-=2,-.5*(e*e*e*e-2))},raceme.inQrt=function(e){return e=raceme._check(e),e*e*e*e},raceme.outQrt=function(e){return e=raceme._check(e),-(--e*e*e*e-1)},raceme.inoutQnt=function(e){return e=raceme._check(e),(e/=.5)<1?.5*e*e*e*e*e:(e-=2,.5*(e*e*e*e*e+2))},raceme.inQnt=function(e){return e=raceme._check(e),e*e*e*e*e},raceme.outQnt=function(e){return e=raceme._check(e),--e*e*e*e*e+1},raceme.inoutExpo=function(e){return e=raceme._check(e),(e/=.5)<1?.5*Math.pow(2,10*(e-1)):(e--,.5*(-Math.pow(2,-10*e)+2))},raceme.inExpo=function(e){return e=raceme._check(e),Math.pow(2,10*(e-1))},raceme.outExpo=function(e){return e=raceme._check(e),-Math.pow(2,-10*e)+1},raceme.inoutCirc=function(e){return e=raceme._check(e),(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1)+b:(e-=2,.5*(Math.sqrt(1-e*e)+1))},raceme.inCirc=function(e){return e=raceme._check(e),-(Math.sqrt(1-e*e)-1)},raceme.outCirc=function(e){return e=raceme._check(e),Math.sqrt(1- --e*e)},raceme.inBounce=function(e){return e=raceme._check(e),1-raceme.outBounce(1-e)},raceme.outBounce=function(e){return e=raceme._check(e),1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},raceme.inoutBounce=function(e){return e=raceme._check(e),.5>e?.5*raceme.inBounce(2*e):.5*raceme.outBounce(2*e-1)+.5},raceme._clearString=function(e){return"string"!=typeof e&&(e=e.toString()),e.replace(/^\s+|\s+$/g,"").toLowerCase()},raceme._string2clearArray=function(e,t){for(var n=e.split(t),r=n.length;--r>=0;)n[r]=raceme._clearString(n[r]);return n},raceme._filledArray=function(e,t){for(var n=new Array(e);--e>=0;)n[e]=t;return n},raceme._RGBColor=function(e,t,n){this.r=raceme.dV(e,0),this.g=raceme.dV(t,0),this.b=raceme.dV(n,0)},raceme._RGBColor.prototype.getString=function(){return"rgb("+this.r+","+this.g+","+this.b+")"},raceme._RGBColor.prototype.RGBtoXYZ=function(){var e=this.r/255,t=this.g/255,n=this.b/255;e=e>.04045?100*Math.pow((e+.055)/1.055,2.4):e/12.92*100,t=t>.04045?100*Math.pow((t+.055)/1.055,2.4):t/12.92*100,n=n>.04045?100*Math.pow((n+.055)/1.055,2.4):n/12.92*100;var r=.4124*e+.3576*t+.1805*n,i=.2126*e+.7152*t+.0722*n,a=.0193*e+.1192*t+.9505*n;return new raceme._RGBColor(r,i,a)},raceme._RGBColor.prototype.XYZtoRGB=function(){var e=this.r/100,t=this.g/100,n=this.b/100,r=3.2406*e+-1.5372*t+n*-.4986,i=e*-.9689+1.8758*t+.0415*n,a=.0557*e+t*-.204+1.057*n;return r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:12.92*a,new raceme._RGBColor(Math.round(255*r),Math.round(255*i),Math.round(255*a))},raceme._getRGB=function(e){if("string"!=typeof e)return!1;var t=e.replace(/[^\d,]/g,"").split(",");if(3==t.length)return new raceme._RGBColor(parseInt(t[0]),parseInt(t[1]),parseInt(t[2]));var n=raceme._hex2rgb(e);return n!==!1?n:isNaN(e)===!1?!1:raceme._getRGB(raceme._name2rgb(e))},raceme._hex2rgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?new raceme._RGBColor(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):!1},raceme._named_colors={aliceblue:"rgb(240,248,255)",antiquewhite:"rgb(250,235,215)",aqua:"rgb(0,255,255)",aquamarine:"rgb(127,255,212)",azure:"rgb(240,255,255)",beige:"rgb(245,245,220)",bisque:"rgb(255,228,196)",black:"rgb(0,0,0)",blanchedalmond:"rgb(255,235,205)",blue:"rgb(0,0,255)",blueviolet:"rgb(138,43,226)",brown:"rgb(165,42,42)",burlywood:"rgb(222,184,135)",cadetblue:"rgb(95,158,160)",chartreuse:"rgb(127,255,0)",chocolate:"rgb(210,105,30)",coral:"rgb(255,127,80)",cornflowerblue:"rgb(100,149,237)",cornsilk:"rgb(255,248,220)",crimson:"rgb(220,20,60)",cyan:"rgb(0,255,255)",darkblue:"rgb(0,0,139)",darkcyan:"rgb(0,139,139)",darkgoldenrod:"rgb(184,134,11)",darkgray:"rgb(169,169,169)",darkgreen:"rgb(0,100,0)",darkgrey:"rgb(169,169,169)",darkkhaki:"rgb(189,183,107)",darkmagenta:"rgb(139,0,139)",darkolivegreen:"rgb(85,107,47)",darkorange:"rgb(255,140,0)",darkorchid:"rgb(153,50,204)",darkred:"rgb(139,0,0)",darksalmon:"rgb(233,150,122)",darkseagreen:"rgb(143,188,143)",darkslateblue:"rgb(72,61,139)",darkslategray:"rgb(47,79,79)",darkslategrey:"rgb(47,79,79)",darkturquoise:"rgb(0,206,209)",darkviolet:"rgb(148,0,211)",deeppink:"rgb(255,20,147)",deepskyblue:"rgb(0,191,255)",dimgray:"rgb(105,105,105)",dimgrey:"rgb(105,105,105)",dodgerblue:"rgb(30,144,255)",firebrick:"rgb(178,34,34)",floralwhite:"rgb(255,250,240)",forestgreen:"rgb(34,139,34)",fuchsia:"rgb(255,0,255)",gainsboro:"rgb(220,220,220)",ghostwhite:"rgb(248,248,255)",gold:"rgb(255,215,0)",goldenrod:"rgb(218,165,32)",gray:"rgb(128,128,128)",grey:"rgb(128,128,128)",green:"rgb(0,128,0)",greenyellow:"rgb(173,255,47)",honeydew:"rgb(240,255,240)",hotpink:"rgb(255,105,180)",indianred:"rgb(205,92,92)",indigo:"rgb(75,0,130)",ivory:"rgb(255,255,240)",khaki:"rgb(240,230,140)",lavender:"rgb(230,230,250)",lavenderblush:"rgb(255,240,245)",lawngreen:"rgb(124,252,0)",lemonchiffon:"rgb(255,250,205)",lightblue:"rgb(173,216,230)",lightcoral:"rgb(240,128,128)",lightcyan:"rgb(224,255,255)",lightgoldenrodyellow:"rgb(250,250,210)",lightgray:"rgb(211,211,211)",lightgreen:"rgb(144,238,144)",lightgrey:"rgb(211,211,211)",lightpink:"rgb(255,182,193)",lightsalmon:"rgb(255,160,122)",lightseagreen:"rgb(32,178,170)",lightskyblue:"rgb(135,206,250)",lightslategray:"rgb(119,136,153)",lightslategrey:"rgb(119,136,153)",lightsteelblue:"rgb(176,196,222)",lightyellow:"rgb(255,255,224)",lime:"rgb(0,255,0)",limegreen:"rgb(50,205,50)",linen:"rgb(250,240,230)",magenta:"rgb(255,0,255)",maroon:"rgb(128,0,0)",mediumaquamarine:"rgb(102,205,170)",mediumblue:"rgb(0,0,205)",mediumorchid:"rgb(186,85,211)",mediumpurple:"rgb(147,112,219)",mediumseagreen:"rgb(60,179,113)",mediumslateblue:"rgb(123,104,238)",mediumspringgreen:"rgb(0,250,154)",mediumturquoise:"rgb(72,209,204)",mediumvioletred:"rgb(199,21,133)",midnightblue:"rgb(25,25,112)",mintcream:"rgb(245,255,250)",mistyrose:"rgb(255,228,225)",moccasin:"rgb(255,228,181)",navajowhite:"rgb(255,222,173)",navy:"rgb(0,0,128)",oldlace:"rgb(253,245,230)",olive:"rgb(128,128,0)",olivedrab:"rgb(107,142,35)",orange:"rgb(255,165,0)",orangered:"rgb(255,69,0)",orchid:"rgb(218,112,214)",palegoldenrod:"rgb(238,232,170)",palegreen:"rgb(152,251,152)",paleturquoise:"rgb(175,238,238)",palevioletred:"rgb(219,112,147)",papayawhip:"rgb(255,239,213)",peachpuff:"rgb(255,218,185)",peru:"rgb(205,133,63)",pink:"rgb(255,192,203)",plum:"rgb(221,160,221)",powderblue:"rgb(176,224,230)",purple:"rgb(128,0,128)",red:"rgb(255,0,0)",rosybrown:"rgb(188,143,143)",royalblue:"rgb(65,105,225)",saddlebrown:"rgb(139,69,19)",salmon:"rgb(250,128,114)",sandybrown:"rgb(244,164,96)",seagreen:"rgb(46,139,87)",seashell:"rgb(255,245,238)",sienna:"rgb(160,82,45)",silver:"rgb(192,192,192)",skyblue:"rgb(135,206,235)",slateblue:"rgb(106,90,205)",slategray:"rgb(112,128,144)",slategrey:"rgb(112,128,144)",snow:"rgb(255,250,250)",springgreen:"rgb(0,255,127)",steelblue:"rgb(70,130,180)",tan:"rgb(210,180,140)",teal:"rgb(0,128,128)",thistle:"rgb(216,191,216)",tomato:"rgb(255,99,71)",turquoise:"rgb(64,224,208)",violet:"rgb(238,130,238)",wheat:"rgb(245,222,179)",white:"rgb(255,255,255)",whitesmoke:"rgb(245,245,245)",yellow:"rgb(255,255,0)",yellowgreen:"rgb(154,205,50)"},raceme._name2rgb=function(e){var t=raceme._clearString(e);return"string"==typeof raceme._named_colors[t]?raceme._named_colors[t]:!1},raceme.defaultValue=raceme.dV=function(e,t){return"undefined"!=typeof e?e:t},raceme._defaultAttributeValues={"fill-opacity":1,"stroke-opacity":1,"stroke-width":1,"stroke-miterlimit":4,fill:"rgb(0,0,0)",stroke:"rgb(0,0,0)",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"rgb(0,0,0)"},raceme._transform2obj=function(e){e=raceme.dV(e,""),e=raceme._clearString(e),e=e.replace(","," "),e=e.replace("\\s+"," ");var t={x:0,y:0,scalex:1,scaley:1,rotation:0,rotationcx:0,rotationcy:0,skewx:0,skewy:0};if(""==e)return t;e=e.split(")");for(var n=0;n<e.length;n++){var r=e[n].split("(");if(2==r.length){r[0]=raceme._clearString(r[0]),r[1]=raceme._clearString(r[1]);var i=r[1].split(" ");"scale"==r[0]?(t.scalex=parseFloat(i[0]),i.length>1?t.scaley=parseFloat(i[1]):t.scaley=t.scalex):"translate"==r[0]?(t.x=parseFloat(i[0]),i.length>1&&(t.y=parseFloat(i[1]))):"rotate"==r[0]?(t.rotation=parseFloat(i[0]),i.length>1&&(t.rotationcx=parseFloat(i[1])),i.length>2&&(t.rotationcy=parseFloat(i[2]))):"skewX"==r[0]?t.skewx=parseFloat(i[0]):"skewY"==r[0]&&(t.skewy=parseFloat(i[0]))}}return t},raceme._obj2transform=function(e){var t="";return(0!=e.x||0!=e.y)&&(t+="translate("+e.x+" "+e.y+") "),(1!=e.scalex||1!=e.scaley)&&(t+=e.scaley==e.scalex?"scale("+e.scalex+") ":"scale("+e.scalex+" "+e.scaley+") "),(0!=e.rotation||0!=e.rotationcx||0!=e.rotationcy)&&(t+="rotate("+e.rotation+" "+e.rotationcx+" "+e.rotationcy+") "),0!=e.skewx&&(t+="skewX("+e.skewx+") "),0!=e.skewy&&(t+="skewY("+e.skewy+") "),t},raceme._likeArray=function(e){return null!==e&&"object"==typeof e&&"number"==typeof e.length?!0:!1},raceme._round=function(e,t){if("undefined"==typeof e)return 0;if("undefined"==typeof t||0==t)return Math.round(e);var n=Math.pow(10,t);return Math.round(e*n)/n},raceme._mapValues=function(e,t,n,r,i){if(t==n||r==i)return r;var a=!1,s=Math.min(t,n),o=Math.max(t,n);s!=t&&(a=!0);var u=!1,h=Math.min(r,i),c=Math.max(r,i);h!=r&&(u=!0);var l;l=0==a?(e-s)*(c-h)/(o-s):(o-e)*(c-h)/(o-s);var f;return f=0==u?l+h:c-l,raceme._round(f,3)},raceme._mapValuesUnits=function(e,t,n,r,i){var a=raceme._getUnit(r),s=raceme._mapValues(e,t,n,parseFloat(raceme._getVal(r)),parseFloat(raceme._getVal(i)));return s.toString()+a},raceme._getUnit=function(e){if("string"!=typeof e||e.length<2)return"";if("%"==e.substring(e.length-1))return"%";var t=e.substring(e.length-2);return"px"==t||"%"==t||"in"==t||"cm"==t||"mm"==t||"em"==t||"ex"==t||"pt"==t||"pc"==t?t:""},raceme._getVal=function(e){if("string"!=typeof e)return e;var t=raceme._getUnit(e);return e.replace(t,"")},raceme._getOperation=function(e,t){if("string"==typeof e){var n=raceme._getUnit(e);if(e=raceme._getVal(e),t=raceme._getVal(t),t.length>2){if("+="==t.substring(0,2))return raceme._round(parseFloat(e)+parseFloat(t.substring(2)),3).toString()+n;if("-="==t.substring(0,2))return raceme._round(parseFloat(e)-parseFloat(t.substring(2)),3).toString()+n;if("*="==t.substring(0,2))return raceme._round(parseFloat(e)*parseFloat(t.substring(2)),3).toString()+n;if("/="==t.substring(0,2))return raceme._round(parseFloat(e)/parseFloat(t.substring(2)),3).toString()+n}return t+n}if(t.length>2){if("+="==t.substring(0,2))return raceme._round(e+parseFloat(t.substring(2)),3);if("-="==t.substring(0,2))return raceme._round(e-parseFloat(t.substring(2)),3);if("*="==t.substring(0,2))return raceme._round(e*parseFloat(t.substring(2)),3);if("/="==t.substring(0,2))return raceme._round(e/parseFloat(t.substring(2)),3)}return""},raceme._contains=function(e,t){if(e==t)return!0;if("undefined"==typeof t||"undefined"==typeof e)return!1;if(e.contains&&1==t.nodeType)return e.contains(t);if(e.compareDocumentPosition)return 16===e.compareDocumentPosition(t);for(;t&&e!=t;)t=t.parentNode;return t==e},raceme._mapColors=function(e,t,n,r,i){if(5!=arguments.length)return"rgb(0,0,0)";var a,s;a="string"==typeof r?raceme._getRGB(r):r,s="string"==typeof i?raceme._getRGB(i):i;var o=Math.max(e,t);o=Math.min(o,n),a=a.RGBtoXYZ(),s=s.RGBtoXYZ();var u=Math.round(raceme._mapValues(o,t,n,a.r,s.r)),h=Math.round(raceme._mapValues(o,t,n,a.g,s.g)),c=Math.round(raceme._mapValues(o,t,n,a.b,s.b));return new raceme._RGBColor(u,h,c).XYZtoRGB().getString()},raceme.map=function(e,t,n,r,i){if(5!=arguments.length)return"";if("string"==typeof r){if(""!=raceme._getUnit(r))return raceme._mapValuesUnits(e,t,n,r,i);if(raceme._getRGB(r)!==!1)return raceme._mapColors(e,t,n,r,i);if(isNaN(parseFloat(r))||isNaN(parseFloat(i)))return""}return raceme._mapValues(e,t,n,r,i)},raceme._elementPoint=function(e,t,n){var r;return e.ownerSVGElement?(r=e.ownerSVGElement.createSVGPoint(),"undefined"!=typeof t&&"undefined"!=typeof n?(r.x=t,r.y=n):(r.x=e.getBBox().x,r.y=e.getBBox().y),r.matrixTransform(e.getTransformToElement(e.ownerSVGElement))):{x:t,y:n}},raceme._getStyle=function(e){var t={};return window.getComputedStyle&&window.getComputedStyle(e,null).length>0?window.getComputedStyle(e,null):e.currentStyle?e.currentStyle:e.style?e.style:t},raceme._newEvent=function(e){var t;try{t=new Event(e)}catch(n){t=document.createEvent("Event"),t.initEvent(e,!1,!0)}return t},raceme._area=function(e){return Math.pow(e,2)*Math.PI},raceme._radius=function(e){return Math.sqrt(e/Math.PI)},raceme.polar2rect=function(e,t){var n=e*Math.cos(t*(Math.PI/180)),r=e*Math.sin(t*(Math.PI/180));return{x:n,y:r}},raceme.rect2polar=function(e,t){var n,r=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return n=0==e?t>0?Math.PI/2:3*Math.PI/2:0>e?Math.atan(t/e)+Math.PI:0>t?Math.atan(t/e)+2*Math.PI:Math.atan(t/e),n*=180/Math.PI,{r:r,angle:n}},raceme.arc_length=function(e,t){return t/360*2*Math.PI*e},raceme.distance=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},raceme.setInterval=function(e,t){if(window.requestAnimationFrame){var n={running:!0,fn:function(){n.running&&(e.call(),window.requestAnimationFrame(n.fn))}};return window.requestAnimationFrame(n.fn),n}return setInterval(e,t)},raceme.clearInterval=function(e){window.requestAnimationFrame?e.running=!1:(clearInterval(e),e=null)},raceme.Polygon=function(e){if(this._area=0,this._points=new Array,this.length=0,this.min=null,this.max=null,"undefined"!=typeof e)for(var t=0;t<e.length;t++)this.add(e[t])},raceme.Polygon.fn=raceme.Polygon.prototype,raceme.Polygon.fn.item=function(e){return-1==e&&(e=this.length-1),e=Math.min(e,this.length-1),e=Math.max(e,0),this._points[e]},raceme.Polygon.fn.add=function(e){return this._points.push(e),this.length++,null===this.min?(this.min={x:e.x,y:e.y},this.max={x:e.x,y:e.y}):(this.min.x=Math.min(this.min.x,e.x),this.min.y=Math.min(this.min.y,e.y),this.max.x=Math.max(this.max.x,e.x),this.max.y=Math.max(this.max.y,e.y)),this},raceme.Polygon.fn.area=function(){var e,t,n=0;for(e=0;e<this.length;e++)t=(e+1)%this.length,n+=this.item(e).x*this.item(t).y,n-=this.item(e).y*this.item(t).x;return n/=2,0>n?-n:n},raceme.Polygon.fn.centroid=function(){var e,t,n;t=this.length-1;var r=0,i=0;for(e=0;e<this.length;e++){var a=this.item(e),s=this.item(t);n=a.x*s.y-s.x*a.y,r+=(a.x+s.x)*n,i+=(a.y+s.y)*n,t=e}n=6*this.area();var o={x:r/n,y:i/n};if(0==this.pointInside(o)){var u=this.innerCentroid();if(null!==u)return u}return o},raceme.Polygon.fn.innerCentroid=function(e){"undefined"==typeof e&&(e=20);for(var t=(this.max.y-this.min.y)/e,n=(this.max.x-this.min.x)/e,r=null,i=null,a=null,s=0;e>s;s++)for(var o=0;e>o;o++){var u=this.min.x+(n/2+s*n),h=this.min.y+(t/2+o*t);this.pointInside({x:u,y:h})&&(null===r||this.sumDistancefromBorders({x:u,y:h})<r)&&(r=this.sumDistancefromBorders({x:u,y:h}),i=s,a=o)}return null===i?null:{x:this.min.x+(n/2+i*n),y:this.min.y+(t/2+a*t)}},raceme.Polygon.fn.sumDistancefromBorders=function(e){for(var t=0,n=0;n<this.length;n++)t+=raceme.distance(e,this.item(n));return t},raceme.Polygon.fn.pointInside=function(e){for(var t=!1,n=0,r=this.length-1;n<this.length;r=n++){var i=this.item(n).x,a=this.item(n).y,s=this.item(r).x,o=this.item(r).y,u=a>e.y!=o>e.y&&e.x<(s-i)*(e.y-a)/(o-a)+i;u&&(t=!t)}return t},"complete"===document.readyState?raceme._execute_main_scripts():document.addEventListener?document.addEventListener("DOMContentLoaded",raceme._execute_main_scripts,!1):document.attachEvent&&document.attachEvent("onreadystatechange",raceme._execute_main_scripts);